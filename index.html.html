<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Wheel Picker + QR Form</title>
<style>
  body { font-family: sans-serif; text-align:center; background-color: #f0f0f0; }
  .hidden { display:none; }
  .wheel-container { position: relative; display:inline-block; margin:20px; background-color: white; border-radius: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); padding: 10px; }
  canvas { border-radius:50%; box-shadow: 0 0 10px rgba(0,0,0,0.2); } 
  .pointer { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent; border-top: 30px solid black; box-shadow: 0 3px 5px rgba(0,0,0,0.3); z-index: 10; }
  #winnerModal { display: none; position: fixed; z-index: 20; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); padding-top: 60px; backdrop-filter: blur(5px); }
  .modal-content { background-color: #fefefe; margin: 5% auto; padding: 30px; border: 1px solid #888; width: 80%; max-width: 500px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); text-align: center; animation: fadeIn 0.5s; pointer-events: auto; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(-50px); } to { opacity: 1; transform: translateY(0); } }
  .winner-text { font-size: 28px; color: #4CAF50; margin-bottom: 10px; font-weight: bold; }
  .prize-text { font-size: 36px; font-weight: bold; color: #ff9800; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
  input, button { padding: 10px; font-size:16px; margin:5px; }
  button { cursor:pointer; border:none; border-radius:5px; background-color:#007bff; color:white; }
  button:hover { background-color:#0056b3; }
</style>
</head>
<body>

<h1>Wheel Picker + QR Form</h1>

<!-- QR Form ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô -->
<div id="qrFormDiv">
  <h3>‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° (‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠/QR)</h3>
  <input id="qrNameInput" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" />
  <button onclick="submitQRName()">‡∏™‡πà‡∏á‡∏ä‡∏∑‡πà‡∏≠</button>
</div>

<!-- Wheel Picker ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô -->
<div id="wheelDiv" class="hidden">
  <div class="wheel-container">
    <canvas id="wheel1" width="350" height="350"></canvas>
    <div class="pointer"></div>
  </div>
  <div class="wheel-container">
    <canvas id="wheel2" width="350" height="350"></canvas>
    <div class="pointer"></div>
  </div>

  <div>
    <button onclick="spinBoth()">‡∏´‡∏°‡∏∏‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ß‡∏á‡∏•‡πâ‡∏≠</button>
  </div>

  <h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• (‡∏ß‡∏á‡∏•‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á)</h3>
  <input id="itemInput" placeholder="‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•" />
  <button onclick="addItem()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</button>
</div>

<div id="winnerModal" onclick="this.style.display='none'">
  <div class="modal-content" onclick="event.stopPropagation()">
    <span class="close-button" onclick="document.getElementById('winnerModal').style.display='none'">&times;</span>
    <h2>üéâ ‡∏ú‡∏π‡πâ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ! üéâ</h2>
    <div class="winner-text" id="modalWinnerName"></div>
    <p>‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö</p>
    <div class="prize-text" id="modalPrizeItem"></div>
    <button style="margin-top: 20px; padding: 10px 20px; font-size: 18px;" onclick="document.getElementById('winnerModal').style.display='none'">‡∏ï‡∏Å‡∏•‡∏á</button>
  </div>
</div>

<script>
let names = [];
let items = ["‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•A","‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•B","‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•C"];
let rotationId;

// --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ ---
function submitQRName() {
  const name = document.getElementById("qrNameInput").value.trim();
  if(!name){ alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠"); return; }

  // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô LocalStorage (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)
  let stored = JSON.parse(localStorage.getItem("wheelNames")) || [];
  stored.push(name);
  localStorage.setItem("wheelNames", JSON.stringify(stored));

  alert("‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì! ‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß üéâ");
  document.getElementById("qrNameInput").value="";
}

// --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì (Wheel Picker) ---
function loadNamesForWheel() {
  // ‡πÇ‡∏´‡∏•‡∏î‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å LocalStorage
  const stored = JSON.parse(localStorage.getItem("wheelNames")) || [];
  names = stored.length ? stored : ["‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á1"];
  drawWheel("wheel1", names);
  drawWheel("wheel2", items);
  rotationId = requestAnimationFrame(smoothRotation);
}

// ‡∏ß‡∏≤‡∏î‡∏ß‡∏á‡∏•‡πâ‡∏≠
function drawWheel(canvasId, data) {
  const canvas = document.getElementById(canvasId);
  const ctx = canvas.getContext("2d");
  const cx = canvas.width/2;
  const cy = canvas.height/2;
  const radius = 150;
  const slice = (2*Math.PI)/(data.length || 0.00001);
  ctx.clearRect(0,0,canvas.width,canvas.height);

  data.forEach((text,i)=>{
    const start = i*slice;
    const end = start+slice;
    ctx.beginPath();
    ctx.moveTo(cx,cy);
    ctx.arc(cx,cy,radius,start,end);
    ctx.fillStyle = `hsl(${i*50},80%,70%)`;
    ctx.fill();
    ctx.stroke();
    ctx.save();
    ctx.translate(cx,cy);
    ctx.rotate(start+slice/2);
    ctx.textAlign="right";
    ctx.fillStyle="#000";
    ctx.font="16px sans-serif";
    ctx.fillText(text,radius-10,5);
    ctx.restore();
  });
}

function smoothRotation(){
  const now = Date.now();
  document.getElementById('wheel1').style.transform = `rotate(${(now/200)%360}deg)`;
  document.getElementById('wheel2').style.transform = `rotate(${(now/220)%360}deg)`;
  rotationId = requestAnimationFrame(smoothRotation);
}

function addItem(){
  let n = document.getElementById("itemInput").value.trim();
  if(!n) return;
  items.push(n);
  drawWheel("wheel2", items);
  document.getElementById("itemInput").value="";
}

function spinBoth(){
  if(names.length===0||items.length===0){ alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠"); return; }
  cancelAnimationFrame(rotationId);
  document.getElementById('wheel1').style.transform='';
  document.getElementById('wheel2').style.transform='';

  let winner1 = names[Math.floor(Math.random()*names.length)];
  let winner2 = items[Math.floor(Math.random()*items.length)];
  document.getElementById('modalWinnerName').innerText = winner1;
  document.getElementById('modalPrizeItem').innerText = winner2;
  document.getElementById('winnerModal').style.display='block';
  rotationId = requestAnimationFrame(smoothRotation);
}

// --- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö (Wheel Picker) ---
function initWheelPicker() {
  document.getElementById("qrFormDiv").classList.add("hidden");
  document.getElementById("wheelDiv").classList.remove("hidden");
  loadNamesForWheel();
}

// --- ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å initWheelPicker() ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ---
// ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î URL ‡πÅ‡∏ö‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡πÄ‡∏ä‡πà‡∏ô https://yourdomain.com?admin=1
const params = new URLSearchParams(window.location.search);
if(params.get("admin")==="1"){
  initWheelPicker();
}
</script>

</body>
</html>
